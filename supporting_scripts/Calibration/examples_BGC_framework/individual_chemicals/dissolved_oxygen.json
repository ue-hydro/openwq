{
  "_DESCRIPTION": "Dissolved Oxygen Dynamics - Streeter-Phelps with extensions",
  "_REFERENCE": "Streeter-Phelps (1925), Chapra (2008), QUAL2E",
  "_VERSION": "1.0",

  "BIOGEOCHEMISTRY_CONFIGURATION": {
    "CHEMICAL_SPECIES": {
      "DO": {
        "DESCRIPTION": "Dissolved oxygen",
        "UNITS": "mg/L",
        "INITIAL_CONDITION": 8.0
      },
      "BOD_fast": {
        "DESCRIPTION": "Fast-decaying (labile) BOD",
        "UNITS": "mg/L",
        "INITIAL_CONDITION": 5.0
      },
      "BOD_slow": {
        "DESCRIPTION": "Slow-decaying (refractory) BOD",
        "UNITS": "mg/L",
        "INITIAL_CONDITION": 2.0
      },
      "CBOD": {
        "DESCRIPTION": "Carbonaceous BOD (total)",
        "UNITS": "mg/L",
        "INITIAL_CONDITION": 7.0
      },
      "NBOD": {
        "DESCRIPTION": "Nitrogenous BOD",
        "UNITS": "mg/L",
        "INITIAL_CONDITION": 2.0
      }
    },

    "CYCLING_FRAMEWORKS": {
      "DO_DYNAMICS": {
        "_DESCRIPTION": "Complete DO mass balance including all sources and sinks",

        "REAERATION": {
          "CONSUMED": "NONE",
          "PRODUCED": "DO",
          "KINETICS": "k_a * (DO_sat - DO)",
          "PARAMETERS": {
            "k_a": {
              "VALUE": 3.0,
              "UNITS": "1/day",
              "RANGE": [0.5, 20.0],
              "DESCRIPTION": "Reaeration coefficient (depth/velocity dependent)"
            },
            "DO_sat": {
              "VALUE": 9.0,
              "UNITS": "mg/L",
              "RANGE": [7.0, 14.0],
              "DESCRIPTION": "DO saturation (temperature dependent)"
            }
          },
          "NOTES": "DO_sat should be calculated from T: DO_sat = 14.652 - 0.41022*T + 0.007991*T^2 - 0.000077774*T^3"
        },

        "REAERATION_TEMP_CORRECTED": {
          "CONSUMED": "NONE",
          "PRODUCED": "DO",
          "KINETICS": "k_a_20 * 1.024^(T - 20) * (DO_sat - DO)",
          "PARAMETERS": {
            "k_a_20": {
              "VALUE": 3.0,
              "UNITS": "1/day",
              "DESCRIPTION": "Reaeration at 20C"
            },
            "DO_sat": {"VALUE": 9.0, "UNITS": "mg/L"}
          },
          "NOTES": "Alternative with explicit temperature correction"
        },

        "BOD_FAST_DECAY": {
          "CONSUMED": "BOD_fast",
          "PRODUCED": "NONE",
          "KINETICS": "k_d_fast * BOD_fast * 1.047^(T - 20)",
          "PARAMETERS": {
            "k_d_fast": {
              "VALUE": 0.3,
              "UNITS": "1/day",
              "RANGE": [0.1, 1.0],
              "DESCRIPTION": "Fast BOD decay rate at 20C"
            }
          }
        },

        "BOD_SLOW_DECAY": {
          "CONSUMED": "BOD_slow",
          "PRODUCED": "NONE",
          "KINETICS": "k_d_slow * BOD_slow * 1.047^(T - 20)",
          "PARAMETERS": {
            "k_d_slow": {
              "VALUE": 0.05,
              "UNITS": "1/day",
              "RANGE": [0.01, 0.15],
              "DESCRIPTION": "Slow BOD decay rate at 20C"
            }
          }
        },

        "CBOD_O2_CONSUMPTION": {
          "CONSUMED": "DO",
          "PRODUCED": "NONE",
          "KINETICS": "(k_d_fast * BOD_fast + k_d_slow * BOD_slow) * 1.047^(T - 20)",
          "PARAMETERS": {
            "k_d_fast": {"VALUE": 0.3, "UNITS": "1/day"},
            "k_d_slow": {"VALUE": 0.05, "UNITS": "1/day"}
          },
          "NOTES": "1:1 stoichiometry assumed for CBOD:O2"
        },

        "NBOD_O2_CONSUMPTION": {
          "CONSUMED": "DO",
          "PRODUCED": "NONE",
          "KINETICS": "k_n * NBOD * 1.08^(T - 20)",
          "PARAMETERS": {
            "k_n": {
              "VALUE": 0.2,
              "UNITS": "1/day",
              "RANGE": [0.1, 0.5],
              "DESCRIPTION": "NBOD oxidation rate"
            }
          },
          "NOTES": "NBOD represents nitrification O2 demand"
        },

        "NBOD_DECAY": {
          "CONSUMED": "NBOD",
          "PRODUCED": "NONE",
          "KINETICS": "k_n * NBOD * 1.08^(T - 20)",
          "PARAMETERS": {
            "k_n": {"VALUE": 0.2, "UNITS": "1/day"}
          }
        },

        "SEDIMENT_O2_DEMAND": {
          "CONSUMED": "DO",
          "PRODUCED": "NONE",
          "KINETICS": "SOD / depth * 1.065^(T - 20)",
          "PARAMETERS": {
            "SOD": {
              "VALUE": 1.5,
              "UNITS": "g/m2/day",
              "RANGE": [0.2, 10.0],
              "DESCRIPTION": "Sediment oxygen demand at 20C"
            },
            "depth": {
              "VALUE": 2.0,
              "UNITS": "m",
              "DESCRIPTION": "Water depth"
            }
          }
        },

        "PHOTOSYNTHESIS": {
          "CONSUMED": "NONE",
          "PRODUCED": "DO",
          "KINETICS": "P_max * f_light * 1.066^(T - 20)",
          "PARAMETERS": {
            "P_max": {
              "VALUE": 5.0,
              "UNITS": "mg/L/day",
              "RANGE": [0.0, 20.0],
              "DESCRIPTION": "Maximum photosynthetic O2 production"
            },
            "f_light": {
              "VALUE": 0.5,
              "DESCRIPTION": "Light availability factor (0-1, diurnal average)"
            }
          },
          "NOTES": "Significant in eutrophic systems with algae"
        },

        "RESPIRATION": {
          "CONSUMED": "DO",
          "PRODUCED": "NONE",
          "KINETICS": "R_max * 1.08^(T - 20)",
          "PARAMETERS": {
            "R_max": {
              "VALUE": 2.0,
              "UNITS": "mg/L/day",
              "RANGE": [0.0, 10.0],
              "DESCRIPTION": "Community respiration rate"
            }
          }
        },

        "BOD_SETTLING": {
          "CONSUMED": "BOD_fast",
          "PRODUCED": "SED_BOD",
          "KINETICS": "k_s * BOD_fast",
          "PARAMETERS": {
            "k_s": {
              "VALUE": 0.1,
              "UNITS": "1/day",
              "RANGE": [0.0, 0.5],
              "DESCRIPTION": "BOD settling rate (particulate fraction)"
            }
          }
        }
      },

      "DO_SAT_FORMULAS": {
        "_DESCRIPTION": "Reference formulas for DO saturation (not reactions)",

        "APHA_1992": {
          "FORMULA": "exp(-139.34411 + 1.575701e5/T_K - 6.642308e7/T_K^2 + 1.2438e10/T_K^3 - 8.621949e11/T_K^4)",
          "NOTES": "T_K = T(C) + 273.15; most accurate"
        },

        "SIMPLIFIED": {
          "FORMULA": "14.652 - 0.41022*T + 0.007991*T^2 - 0.000077774*T^3",
          "NOTES": "T in Celsius; valid 0-40C"
        },

        "ALTITUDE_CORRECTION": {
          "FORMULA": "DO_sat_0 * (1 - elevation/9450)",
          "NOTES": "elevation in meters"
        }
      }
    },

    "COMPARTMENT_ASSIGNMENT": {
      "RIVER": ["DO_DYNAMICS"],
      "LAKE": ["DO_DYNAMICS"],
      "STREAM": ["DO_DYNAMICS"]
    }
  }
}
