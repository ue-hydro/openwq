{
  "_DESCRIPTION": "HYPE-Style Nutrient Cycling Model",
  "_REFERENCE": "HYPE Model Documentation (SMHI)",
  "_MODEL": "Hydrological Predictions for the Environment (HYPE)",
  "_VERSION": "1.0",
  "_NOTES": "Nordic-style catchment nutrient model with soil layers and wetland retention",

  "BIOGEOCHEMISTRY_CONFIGURATION": {
    "CHEMICAL_SPECIES": {
      "_NITROGEN": "Nitrogen pools",
      "IN": {
        "DESCRIPTION": "Inorganic nitrogen (NO3 + NH4)",
        "UNITS": "mg/L",
        "INITIAL_CONDITION": 3.0
      },
      "ON": {
        "DESCRIPTION": "Organic nitrogen",
        "UNITS": "mg/L",
        "INITIAL_CONDITION": 1.0
      },
      "humusN": {
        "DESCRIPTION": "Soil humus nitrogen pool",
        "UNITS": "kg/km2",
        "INITIAL_CONDITION": 1000
      },
      "fastN": {
        "DESCRIPTION": "Fast-cycling organic N pool",
        "UNITS": "kg/km2",
        "INITIAL_CONDITION": 100
      },

      "_PHOSPHORUS": "Phosphorus pools",
      "SP": {
        "DESCRIPTION": "Soluble reactive phosphorus",
        "UNITS": "mg/L",
        "INITIAL_CONDITION": 0.05
      },
      "PP": {
        "DESCRIPTION": "Particulate phosphorus",
        "UNITS": "mg/L",
        "INITIAL_CONDITION": 0.1
      },
      "humusP": {
        "DESCRIPTION": "Soil humus phosphorus pool",
        "UNITS": "kg/km2",
        "INITIAL_CONDITION": 200
      },
      "fastP": {
        "DESCRIPTION": "Fast-cycling organic P pool",
        "UNITS": "kg/km2",
        "INITIAL_CONDITION": 20
      },
      "PartP": {
        "DESCRIPTION": "Soil particulate P (mineral)",
        "UNITS": "kg/km2",
        "INITIAL_CONDITION": 500
      },

      "_CARBON": "Total organic carbon",
      "TOC": {
        "DESCRIPTION": "Total organic carbon",
        "UNITS": "mg/L",
        "INITIAL_CONDITION": 10.0
      },

      "_SEDIMENT": "Suspended sediment",
      "SS": {
        "DESCRIPTION": "Suspended sediment",
        "UNITS": "mg/L",
        "INITIAL_CONDITION": 20.0
      }
    },

    "CYCLING_FRAMEWORKS": {
      "HYPE_SOIL_N": {
        "_DESCRIPTION": "HYPE soil nitrogen processes",

        "MINERALIZATION_N": {
          "CONSUMED": "humusN",
          "PRODUCED": "IN",
          "KINETICS": "minerfN * tmpfcn * smfcn * humusN",
          "PARAMETERS": {
            "minerfN": {
              "VALUE": 0.00005,
              "UNITS": "1/day",
              "RANGE": [0.00001, 0.0002],
              "DESCRIPTION": "N mineralization rate from humus"
            },
            "tmpfcn": {
              "VALUE": 1.0,
              "DESCRIPTION": "Temperature function: 2^((T-20)/10)"
            },
            "smfcn": {
              "VALUE": 1.0,
              "DESCRIPTION": "Soil moisture function"
            }
          }
        },

        "MINERALIZATION_FAST_N": {
          "CONSUMED": "fastN",
          "PRODUCED": "IN",
          "KINETICS": "minerfN * 10 * tmpfcn * smfcn * fastN",
          "PARAMETERS": {
            "minerfN": {"VALUE": 0.00005, "UNITS": "1/day"},
            "tmpfcn": {"VALUE": 1.0},
            "smfcn": {"VALUE": 1.0}
          },
          "NOTES": "Fast pool mineralizes 10x faster than humus"
        },

        "DENITRIFICATION": {
          "CONSUMED": "IN",
          "PRODUCED": "N2_loss",
          "KINETICS": "denitrlu * denitr * tmpfcn * smfcn_sat * IN / (IN + halfsatIN)",
          "PARAMETERS": {
            "denitrlu": {
              "VALUE": 1.0,
              "DESCRIPTION": "Land-use dependent factor (0-1)"
            },
            "denitr": {
              "VALUE": 0.003,
              "UNITS": "1/day",
              "RANGE": [0.0005, 0.01],
              "DESCRIPTION": "Denitrification rate parameter"
            },
            "halfsatIN": {
              "VALUE": 1.0,
              "UNITS": "mg/L",
              "DESCRIPTION": "Half-saturation for IN"
            },
            "smfcn_sat": {
              "VALUE": 0.5,
              "DESCRIPTION": "Saturation function: max(0, (sm-wp)/(fc-wp))"
            }
          }
        },

        "CROP_UPTAKE_N": {
          "CONSUMED": "IN",
          "PRODUCED": "CROP_N",
          "KINETICS": "uptakelu * uptakeN * cropcover * tmpfcn * IN / (IN + halfsatIN)",
          "PARAMETERS": {
            "uptakelu": {
              "VALUE": 1.0,
              "DESCRIPTION": "Land-use factor"
            },
            "uptakeN": {
              "VALUE": 0.05,
              "UNITS": "1/day",
              "DESCRIPTION": "Plant uptake rate"
            },
            "cropcover": {
              "VALUE": 0.5,
              "DESCRIPTION": "Crop cover fraction"
            },
            "halfsatIN": {"VALUE": 1.0, "UNITS": "mg/L"}
          }
        },

        "DISSOLUTION_ON": {
          "CONSUMED": "ON",
          "PRODUCED": "IN",
          "KINETICS": "dissolfN * tmpfcn * ON",
          "PARAMETERS": {
            "dissolfN": {
              "VALUE": 0.003,
              "UNITS": "1/day",
              "RANGE": [0.001, 0.01],
              "DESCRIPTION": "ON dissolution rate"
            }
          }
        }
      },

      "HYPE_SOIL_P": {
        "_DESCRIPTION": "HYPE soil phosphorus processes",

        "MINERALIZATION_P": {
          "CONSUMED": "humusP",
          "PRODUCED": "SP",
          "KINETICS": "minerfP * tmpfcn * smfcn * humusP",
          "PARAMETERS": {
            "minerfP": {
              "VALUE": 0.00003,
              "UNITS": "1/day",
              "RANGE": [0.00001, 0.0001],
              "DESCRIPTION": "P mineralization rate from humus"
            }
          }
        },

        "MINERALIZATION_FAST_P": {
          "CONSUMED": "fastP",
          "PRODUCED": "SP",
          "KINETICS": "minerfP * 10 * tmpfcn * smfcn * fastP",
          "PARAMETERS": {
            "minerfP": {"VALUE": 0.00003, "UNITS": "1/day"}
          }
        },

        "DISSOLUTION_PP": {
          "CONSUMED": "PartP",
          "PRODUCED": "SP",
          "KINETICS": "dissolfP * tmpfcn * PartP",
          "PARAMETERS": {
            "dissolfP": {
              "VALUE": 0.0003,
              "UNITS": "1/day",
              "RANGE": [0.0001, 0.001],
              "DESCRIPTION": "Particulate P dissolution rate"
            }
          }
        },

        "P_SORPTION": {
          "CONSUMED": "SP",
          "PRODUCED": "PartP",
          "KINETICS": "freession * freession * (SP - eqSP)",
          "PARAMETERS": {
            "freession": {
              "VALUE": 0.1,
              "UNITS": "1/day",
              "DESCRIPTION": "P sorption rate"
            },
            "eqSP": {
              "VALUE": 0.01,
              "UNITS": "mg/L",
              "DESCRIPTION": "Equilibrium SP concentration"
            }
          },
          "NOTES": "Net sorption when SP > eqSP"
        },

        "CROP_UPTAKE_P": {
          "CONSUMED": "SP",
          "PRODUCED": "CROP_P",
          "KINETICS": "uptakelu * uptakeP * cropcover * tmpfcn * SP / (SP + halfsatSP)",
          "PARAMETERS": {
            "uptakeP": {
              "VALUE": 0.01,
              "UNITS": "1/day",
              "DESCRIPTION": "Plant P uptake rate"
            },
            "halfsatSP": {
              "VALUE": 0.02,
              "UNITS": "mg/L"
            }
          }
        }
      },

      "HYPE_STREAM": {
        "_DESCRIPTION": "HYPE in-stream processes",

        "STREAM_DENITR": {
          "CONSUMED": "IN",
          "PRODUCED": "N2_loss",
          "KINETICS": "denitwrm * tmpfcn_water * IN",
          "PARAMETERS": {
            "denitwrm": {
              "VALUE": 0.001,
              "UNITS": "1/day",
              "RANGE": [0.0001, 0.01],
              "DESCRIPTION": "In-stream denitrification rate"
            },
            "tmpfcn_water": {
              "VALUE": 1.0,
              "DESCRIPTION": "Water temperature function"
            }
          }
        },

        "STREAM_ON_PRODUCTION": {
          "CONSUMED": "IN",
          "PRODUCED": "ON",
          "KINETICS": "prodNpar * tmpfcn_water * IN",
          "PARAMETERS": {
            "prodNpar": {
              "VALUE": 0.0005,
              "UNITS": "1/day",
              "DESCRIPTION": "Organic N production from algae"
            }
          }
        },

        "STREAM_PP_SETTLING": {
          "CONSUMED": "PP",
          "PRODUCED": "SED_P",
          "KINETICS": "sedPP * PP / depth",
          "PARAMETERS": {
            "sedPP": {
              "VALUE": 0.5,
              "UNITS": "m/day",
              "RANGE": [0.1, 2.0],
              "DESCRIPTION": "PP settling velocity"
            },
            "depth": {"VALUE": 1.0, "UNITS": "m"}
          }
        },

        "STREAM_SS_SETTLING": {
          "CONSUMED": "SS",
          "PRODUCED": "SED_SS",
          "KINETICS": "sedSS * SS / depth",
          "PARAMETERS": {
            "sedSS": {
              "VALUE": 1.0,
              "UNITS": "m/day",
              "DESCRIPTION": "SS settling velocity"
            },
            "depth": {"VALUE": 1.0, "UNITS": "m"}
          }
        }
      },

      "HYPE_LAKE": {
        "_DESCRIPTION": "HYPE lake processes",

        "LAKE_DENITR": {
          "CONSUMED": "IN",
          "PRODUCED": "N2_loss",
          "KINETICS": "lakeDenitr * tmpfcn_lake * IN * (1 - ice_fraction)",
          "PARAMETERS": {
            "lakeDenitr": {
              "VALUE": 0.002,
              "UNITS": "1/day",
              "RANGE": [0.0005, 0.01],
              "DESCRIPTION": "Lake denitrification rate"
            },
            "ice_fraction": {
              "VALUE": 0.0,
              "DESCRIPTION": "Ice cover fraction (0-1)"
            }
          }
        },

        "LAKE_N_RETENTION": {
          "CONSUMED": "IN",
          "PRODUCED": "SED_N",
          "KINETICS": "lakeNret * tmpfcn_lake * IN",
          "PARAMETERS": {
            "lakeNret": {
              "VALUE": 0.001,
              "UNITS": "1/day",
              "DESCRIPTION": "Lake N retention rate"
            }
          }
        },

        "LAKE_P_RETENTION": {
          "CONSUMED": "SP",
          "PRODUCED": "SED_P",
          "KINETICS": "lakePret * SP",
          "PARAMETERS": {
            "lakePret": {
              "VALUE": 0.005,
              "UNITS": "1/day",
              "RANGE": [0.001, 0.02],
              "DESCRIPTION": "Lake P retention rate"
            }
          }
        },

        "LAKE_INTERNAL_P": {
          "CONSUMED": "NONE",
          "PRODUCED": "SP",
          "KINETICS": "lakeintpar * tmpfcn_lake * (1 - ice_fraction) / depth",
          "PARAMETERS": {
            "lakeintpar": {
              "VALUE": 0.5,
              "UNITS": "mg/m2/day",
              "RANGE": [0.1, 5.0],
              "DESCRIPTION": "Lake internal P loading rate"
            },
            "depth": {"VALUE": 5.0, "UNITS": "m"}
          },
          "NOTES": "Internal loading from sediments"
        },

        "LAKE_PP_SETTLING": {
          "CONSUMED": "PP",
          "PRODUCED": "SED_P",
          "KINETICS": "sedPP * PP / depth",
          "PARAMETERS": {
            "sedPP": {"VALUE": 0.5, "UNITS": "m/day"},
            "depth": {"VALUE": 5.0, "UNITS": "m"}
          }
        },

        "LAKE_ON_SETTLING": {
          "CONSUMED": "ON",
          "PRODUCED": "SED_N",
          "KINETICS": "sedON * ON / depth",
          "PARAMETERS": {
            "sedON": {
              "VALUE": 0.3,
              "UNITS": "m/day",
              "DESCRIPTION": "ON settling velocity"
            },
            "depth": {"VALUE": 5.0, "UNITS": "m"}
          }
        }
      },

      "HYPE_WETLAND": {
        "_DESCRIPTION": "HYPE wetland nutrient retention",

        "WETLAND_N_RETENTION": {
          "CONSUMED": "IN",
          "PRODUCED": "SED_N",
          "KINETICS": "wetNret * IN",
          "PARAMETERS": {
            "wetNret": {
              "VALUE": 0.01,
              "UNITS": "1/day",
              "RANGE": [0.005, 0.05],
              "DESCRIPTION": "Wetland N retention rate"
            }
          }
        },

        "WETLAND_P_RETENTION": {
          "CONSUMED": "SP",
          "PRODUCED": "SED_P",
          "KINETICS": "wetPret * SP",
          "PARAMETERS": {
            "wetPret": {
              "VALUE": 0.02,
              "UNITS": "1/day",
              "RANGE": [0.01, 0.1],
              "DESCRIPTION": "Wetland P retention rate"
            }
          }
        }
      },

      "HYPE_TEMPERATURE_FUNCTIONS": {
        "_DESCRIPTION": "Temperature correction factors used in HYPE",

        "Q10_FUNCTION": {
          "FORMULA": "tmpfcn = Q10^((T - Tref) / 10)",
          "Q10": 2.0,
          "Tref": 20.0,
          "NOTES": "Standard Q10 formulation"
        },

        "ARRHENIUS": {
          "FORMULA": "tmpfcn = exp(A * (T - Tref))",
          "A": 0.069,
          "Tref": 20.0,
          "NOTES": "Equivalent to Q10=2"
        },

        "MOISTURE_FUNCTION": {
          "FORMULA": "smfcn = (sm - wp) / (fc - wp)",
          "NOTES": "sm=soil moisture, wp=wilting point, fc=field capacity"
        }
      }
    },

    "COMPARTMENT_ASSIGNMENT": {
      "SOIL_LAYER_1": ["HYPE_SOIL_N", "HYPE_SOIL_P"],
      "SOIL_LAYER_2": ["HYPE_SOIL_N", "HYPE_SOIL_P"],
      "SOIL_LAYER_3": ["HYPE_SOIL_N", "HYPE_SOIL_P"],
      "STREAM": ["HYPE_STREAM"],
      "LAKE": ["HYPE_LAKE"],
      "WETLAND": ["HYPE_WETLAND"]
    }
  }
}
